uniform sampler2D source_image;
uniform vec3 texel_radius;

in vec2 TexCoord;
out vec4 FragColor;

void main()
{
 vec4 value = texture(source_image, TexCoord);
 
 float x = 1.0;
 while (x <= texel_radius.z)
 {
  vec2 dudv = texel_radius.xy * x;

  value += texture(source_image, TexCoord - dudv) +
           texture(source_image, TexCoord + dudv);

  x += 1.0;
 }

 FragColor = value / (2.0 * texel_radius.z + 1.0);
}